(function(){function t(){ExecuteOrDelayUntilScriptLoaded(n,"EPMLiveNavigation")}var n=function(){$(function(){var n=window.jQuery,t=function(){var c=300,l="epm-nav-node",a="epm-nav-node-hover",e="epm-nav-node-opened",i="epm-nav-node-selected",v="epmnav-selected-tlnode",y="epmnav-selected-link",o="epmnav-expand-state",s="epmnav-pin-state",u={expires:365,path:"/"},t=n("#epm-nav-sub"),r=[],b=function(f){var a=f,o=n(f),h=n("#epm-nav-sub-"+o.data("id")),l=a.id,y=function(){return o.parent().hasClass(i)},d=function(){return o.parent().hasClass(e)},p=function(n){n?o.parent().addClass(i):o.parent().removeClass(i)},w=function(){h.hide();o.parent().removeClass(e)},b=function(){t.is(":visible")&&t.hide("slide",{direction:"left"},c);w()},g=function(){h.show();o.parent().addClass(e)},k=function(){g();t.is(":visible")||t.show("slide",{direction:"left"},c)};return o.click(function(){var i,t;if(y())d()&&n.cookie(s)==="unpinned"?b():k();else{for(i in r)t=r[i],t.id!==l&&t.selected()&&(t.select(!1),t.close());p(!0);k();n.cookie(v,l,u)}}),{id:l,selected:y,select:p,close:w,closeNav:b,el:a,$el:o,$menu:h}},p=function(){for(var t,n=0;n<r.length;n++)if(t=r[n],t.selected()){t.closeNav();break}},h=function(i){var e=["s4-ribbonrow","s4-workspace"],o,r,f;for(o in e)r=n("#"+e[o]),r.removeClass("epm-nav-pinned"),r.removeClass("epm-nav-unpinned"),r.addClass("epm-nav-"+i);f=n("#epm-nav-pin");f.removeClass("epm-nav-pin-pinned");f.removeClass("epm-nav-pin-unpinned");f.addClass("epm-nav-pin-"+i);i==="unpinned"&&p();t.data("pinstate",i);n.cookie(s,i,u)},k=function(){t.data("pinstate")==="pinned"?h("unpinned"):h("pinned")},d=function(t,i){var r=n.parseJSON(n.cookie(o))||{};r[t]=i;n.cookie(o,JSON.stringify(r),u)},g=function(){var o=window.TreeView_HoverNode,s=window.TreeView_UnhoverNode,h=window.TreeView_ToggleNode,r,e,i;window.TreeView_HoverNode=function(t,i){var r=n(i);r.hasClass(l)?r.parent().parent().parent().addClass(a):o(t,i)};window.TreeView_UnhoverNode=function(t){var i=n(t);i.hasClass(l)?n(t).parent().parent().parent().removeClass(a):s(t)};window.TreeView_ToggleNode=function(t,i,r,u,e){for(var p=[],l=null,w=n(r).parents("div"),a,b,v,o,y,c,s=0;s<w.length;s++)if(a=w[s],b=n(a),b.hasClass("epm-nav-sub")){for(l=a.id,v=f(l),o=0;o<v.length;o++)y=v[o],c=n(y).is(":visible"),y.id.replace("Nodes","")===r.id&&(c=!c),p[o]=c;break}d(l,p);h(t,i,r,u,e)};r=["suiteBar","s4-ribbonrow","s4-workspace"];for(e in r)n("#"+r[e]).click(function(){t.data("pinstate")==="unpinned"&&p()});i=n("#epm-nav-pin");i.click(function(){k()});t.hover(function(){i.show()},function(){i.hide()});n("a.epm-nav-node").click(function(){var r=-1,e=n(this),o=e.parents("div")[0],s=n(o).siblings("div"),i,t,h;if(s)for(i=f(n(s[0]).parent().parent().attr("id")),t=0;t<i.length;t++)h=i[t],h.id===o.id&&(r=t);n.cookie(y,JSON.stringify({index:r,uri:e.attr("href")}),u)})},w=function(){return(n.cookie(v)||"epm-nav-top-ql").replace("epm-nav-top-","epm-nav-sub-")},f=function(t){return n("#"+t).find(".epm-nav-sub-menu").find("div[id^=E]")},nt=function(){var s=n.parseJSON(n.cookie(o)),i,r,u,t,e,h;if(s&&(i=w(),r=s[i],r&&i==="epm-nav-sub-ql"))for(u=f("epm-nav-sub-ql"),t=0;t<u.length;t++)r[t]&&(e=u[t].id,h=e.replace("Nodes",""),TreeView_ToggleNode(window.EPMLiveNav_Data,0,document.getElementById(h)," ",document.getElementById(e)))},tt=function(){var r=n.parseJSON(n.cookie(y)),e,t;if(r){var u=r.index,o=r.uri,s=n("#"+w());if(u&&u!==-1){for(e=f(s.parent().attr("id")),t=0;t<e.length;t++)if(t===u){n(e[t]).find('a[href="'+o+'"]:first').parents("table").addClass(i);break}}else s.find('a[href="'+o+'"]:first').parents("table").addClass(i)}},it=function(){var t=n.cookie(s);n("#epm-nav-top").find("[data-role='top-nav-node']").each(function(){r.push(new b(this))});h(t||"pinned");nt();tt();g()};return{init:it}};t().init()})};ExecuteOrDelayUntilScriptLoaded(t,"jquery.min.js")})();
//@ sourceMappingURL=EPMLive.Navigation.min.js.map