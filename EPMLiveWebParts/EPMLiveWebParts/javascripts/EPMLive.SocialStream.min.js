(function(n,t,i){"use strict";var u=function(){var r=t.Application.create({rootElement:"#epm-social-stream"});r.ApplicationAdapter=DS.RESTAdapter.extend({namespace:window.epmLive.currentWebUrl.slice(1)+"/_vti_bin/SocialEngine.svc"});r.ConfigureMoment=function(){i.lang("en",{calendar:{lastDay:"[Yesterday -]  MMMM D",sameDay:"[Today -] MMMM D",nextDay:"[Tomorrow -] MMMM D",lastWeek:"[Last] dddd [-] MMMM D",nextWeek:"dddd [-] MMMM D",sameElse:"MMMM D YYYY"}})};r.ConfigureMoment();r.Day=DS.Model.extend({threads:DS.hasMany("thread"),day:function(){return i(this.get("id")).calendar()}.property()});r.Thread=DS.Model.extend({title:DS.attr(),url:DS.attr(),kind:DS.attr(),itemId:DS.attr(),lastActivityOn:DS.attr(),day:DS.belongsTo("day"),web:DS.belongsTo("web"),list:DS.belongsTo("list"),activities:DS.hasMany("activity"),activityUrl:function(){return window.epmLive.currentWebUrl+"/"+this.get("url")}.property()});r.Activity=DS.Model.extend({time:DS.attr(),metaData:DS.attr(),key:DS.attr(),kind:DS.attr(),isMassOperation:DS.attr(),user:DS.belongsTo("user"),thread:DS.belongsTo("thread"),date:function(){var n=i(this.get("time"));return i.lang("en",{calendar:{lastDay:"[Yesterday]  MMM D",sameDay:"[Today] MMM D",nextDay:"[Tomorrow] MMM D",lastWeek:"[Last] ddd MMM D",nextWeek:"ddd MMM D",sameElse:"MMMM D YYYY"}}),n=n.calendar(),r.ConfigureMoment(),n}.property(),icon:function(){var n=null,t;return this.get("kind")==="COMMENTADDED"?n="icon-bubble-12":(t=this.get("thread").get("list"),t&&(n=t.get("icon"))),"icon "+(n||"icon-square")}.property(),fullDateTime:function(){return i(this.get("time")).format("LLLL")}.property(),comment:function(){if(this.get("kind")!=="COMMENTADDED")return"";var t=n.parseJSON(this.get("metaData"));return t.comment||""}.property()});r.Web=DS.Model.extend({title:DS.attr(),url:DS.attr(),threads:DS.hasMany("thread"),isNotCurrentWorkspace:function(){return this.get("id").toLowerCase()!==window.epmLive.currentWebId.toLowerCase()}.property()});r.List=DS.Model.extend({name:DS.attr(),url:DS.attr(),icon:DS.attr("string",{defaultValue:"icon-square"}),threads:DS.hasMany("thread")});r.User=DS.Model.extend({name:DS.attr(),account:DS.attr(),avatar:DS.attr(),activities:DS.hasMany("activity"),hasAvatar:function(){return this.get("avatar")!==null}.property(),displayName:function(){return this.get("id")===window.epmLive.currentUserId?"You":this.get("name").split(" ")[0]}.property(),profileUrl:function(){return window.epmLive.currentWebUrl+"/_layouts/15/userdisp.aspx?ID="+this.get("id")}.property()});r.IndexRoute=t.Route.extend({model:function(){return this.store.find("activity")},setupController:function(n,t){n.set("content",t);n.set("days",this.store.all("day"))}});r.IndexView=t.View.extend({tagName:"ul",classNames:["days"]});r.DayView=t.View.extend({tagName:"li",classNames:["day"]});r.ThreadsView=t.View.extend({tagName:"ul",classNames:["threads"]});r.ThreadView=t.View.extend({tagName:"li",classNames:["thread","clearfix"],classNameBindings:["singleActivityThread","isComment"],singleActivityThread:t.computed.alias("controller.singleActivityThread"),isComment:t.computed.alias("controller.isComment")});r.ActivitiesView=t.View.extend({tagName:"ul",classNames:["activities"]});r.ActivityView=t.View.extend({tagName:"li",classNames:["activity"]});r.ThreadController=t.ObjectController.extend({hasList:function(){return this.get("list")!==null}.property(),hasItem:function(){return this.get("itemId")!==null}.property(),firstActivity:function(){return this.get("activities").get("firstObject")}.property("activities.@each"),isComment:function(){return this.get("firstActivity").get("kind")==="COMMENTADDED"&&this.get("activities").get("length")===1}.property("firstActivity"),singleActivityThread:function(){return!this.get("isComment")&&this.get("activities").get("length")===1}.property("isComment","activities.@each")});r.ActivityTimeComponent=t.Component.extend({actions:{showDate:function(){this.$().find("span.date").tooltip("show")}}});r.UserInfoComponent=t.Component.extend({actions:{showName:function(){this.$().find("a.user").tooltip("show")}}})},r=function(){window.epmLive?(Function.prototype.property=function(){var n=t.computed(this);return n.property.apply(n,arguments)},u()):window.setTimeout(function(){r()},1)};r()})(jQuery,Ember,moment);
/*
//# sourceMappingURL=EPMLive.SocialStream.min.js.map
*/